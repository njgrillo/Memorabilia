@inherits CommandQuery

@typeparam TItem
@typeparam TType

<HiddenControl Visible="Visible">
    <Condition Evaluation="DisplaySkeleton">
        <Match>
            <MudSkeleton Height="50px"
                         SkeletonType="SkeletonType.Rectangle" />
        </Match>
        <NotMatch>
            <Condition Evaluation="@MultiSelect">
                <Match>
                    <MudSelect @bind-Value="SelectedValue"
                               Disabled="@Disabled"
                               Label="@Label"
                               MultiSelection="true"
                               MultiSelectionTextFunc="@(new Func<List<string>, string>(GetMultiSelectionText))"
                               SelectAll="SelectAll"
                               SelectedValues="SelectedItems"
                               SelectedValuesChanged="SelectedItemsChanged"
                               T="TType"
                               Variant="Variant.Outlined">
                        <Iterations Context="item"
                                    Items="Items">
                            <MudSelectItem Value="@(GetItemDisplayValue(item))">@GetItemDisplayText(item)</MudSelectItem>
                        </Iterations>
                    </MudSelect>
                </Match>
                <NotMatch>
                    <MudSelect Disabled="@Disabled"
                               Label="@Label"
                               T="TType"
                               Value="@SelectedValue"
                               ValueChanged="@((p) => SelectionChanged.InvokeAsync(p))"
                               Variant="@Variant">
                        <Condition Evaluation="@DisplaySelect">
                            <Match>
                                <MudSelectItem Value="@SelectItemValue">@SelectItemText</MudSelectItem>
                            </Match>
                        </Condition>
                        <Iterations Context="item"
                                    Items="Items">
                            <MudSelectItem Value="@(GetItemDisplayValue(item))">@GetItemDisplayText(item)</MudSelectItem>
                        </Iterations>
                    </MudSelect>
                </NotMatch>
            </Condition>
        </NotMatch>
    </Condition>
</HiddenControl>

