@inherits EditPersonItem<SavePersonImageViewModel, PersonImageViewModel>

<EditPage ContinueNavigationPath="@ViewModel.ContinueNavigationPath"
          DisplaySaveContinueButton="false"
          EditMode="ViewModel.EditModeType"
          ExitNavigationPath="@ViewModel.ExitNavigationPath"
          ImageFileName="@ViewModel.ImageFileName" 
          ItemName="@ViewModel.ItemTitle"
          Model="ViewModel"
          OnLoad="OnLoad"
          OnSave="HandleValidSubmit"
          PageFooterButtonText="@ViewModel.ExitButtonText"
          PageFooterNavigationPath="@ViewModel.BackNavigationPath"
          PageTitle="@ViewModel.PageTitle"
          TItem="SavePersonImageViewModel"
          UseMultipleButtons="true">
    <TimelineContent>
        <PersonTimeline EditMode="ViewModel.EditModeType"
                        PersonId="ViewModel.PersonId"
                        PersonStep="ViewModel.PersonStep" />
    </TimelineContent>
    <Content>
        <DivRowCol12>
            <Content>
                <DivRowCol3>
                    <Content>
                        <InputFile id="fileInput" 
                                   accept="image/*" 
                                   hidden
                                   OnChange="@LoadFile"   />
                        <MudFab Color="MudBlazor.Color.Secondary"
                                HtmlTag="label"
                                Icon="@Icons.Material.Filled.Image"
                                Label="Load picture"
                                for="fileInput" />  
                    </Content>
                </DivRowCol3>
                <DivRowCol3>
                    <Content>
                        <Condition Evaluation="_hasImage">
                            <Match>
                                <ImageEditor CanRemove="true"
                                             HasPrimary="false"
                                             ImageFileName="@ViewModel.PersonImageFileName"
                                             ImageRootPath="@PersonImageRootPath"
                                             ImageType="ImageType.Primary"
                                             OnRemove="Remove" /> 
                            </Match>
                        </Condition>
                    </Content>
                </DivRowCol3>
            </Content>
        </DivRowCol12>
    </Content>
    <AdditionalButtons>
        <SaveButton OnClick="OnSaveReturnClick"
                    Text="Save & Return to People" />
    </AdditionalButtons>
</EditPage>
