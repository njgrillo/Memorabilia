@inherits AutographItem<SaveAuthenticationViewModel>

<EditPage ContinueNavigationPath="@AuthenticationsViewModel.ContinueNavigationPath"
          DomainImageRootPath="@DomainImageRootPath"
          EditMode="AuthenticationsViewModel.EditModeType"
          ExitNavigationPath="@AuthenticationsViewModel.ExitNavigationPath"
          ImageFileName="@AuthenticationsViewModel.ImageFileName"
          ItemName="@AuthenticationsViewModel.PageTitle"
          Model="AuthenticationsViewModel"
          OnLoad="OnLoad"
          OnSave="OnSave"
          PageFooterButtonText="@AuthenticationsViewModel.ExitButtonText"
          PageFooterNavigationPath="@AuthenticationsViewModel.BackNavigationPath"
          PageTitle="@AuthenticationsViewModel.PageTitle"
          TItem="SaveAuthenticationsViewModel"
          UseMultipleButtons="true"
          ValidationResult="@ViewModel.ValidationResult">
    <TimelineContent>
        <AutographTimeline AutographId="AuthenticationsViewModel.AutographId" 
                           AutographStep="AuthenticationsViewModel.AutographStep"  
                           DisplaySpot="AuthenticationsViewModel.CanHaveSpot" 
                           EditMode="AuthenticationsViewModel.EditModeType"
                           MemorabiliaId="AuthenticationsViewModel.MemorabiliaId"/>
    </TimelineContent>
    <ImagePreview>
        <PrettyBlazor.Condition Evaluation="AuthenticationsViewModel.HasMemorabiliaImages">
            <Match>
                <ImagePanel DomainImageRootPath="@DomainImageRootPath"
                            ImageNames="@AuthenticationsViewModel.MemorabiliaImageNames"
                            ImageRootPath="@UploadPath"
                            PanelText="Memorabilia Images" />
            </Match>
        </PrettyBlazor.Condition>
    </ImagePreview>
    <Content>
        <DivRowCol4>
            <Content>
                <AuthenticationCompanyDropDown Disabled="@(!_canEditAuthenticationCompany)"
                                               SelectedValue="ViewModel.AuthenticationCompanyId"
                                               SelectionChanged="(p) => ViewModel.AuthenticationCompanyId = p" />
            </Content>
        </DivRowCol4>
        <DivRowCol4>
            <Content>
                <TextField Label="Verification"
                           SelectedText="@ViewModel.Verification"
                           SelectedTextChanged="@((p) => ViewModel.Verification = p)" />
            </Content>
        </DivRowCol4>
        <DivRowCol2>
            <Content>
                <MudSwitch Checked="@ViewModel.HasHologram"
                           CheckedChanged="(p) => ViewModel.HasHologram = p"
                           Color="MudBlazor.Color.Success"
                           Label="Has Hologram?"
                           T="bool" />
            </Content>
            <ContentColumn2>
                <MudSwitch Checked="@ViewModel.HasCertificationCard"
                           CheckedChanged="(p) => ViewModel.HasCertificationCard = p"
                           Color="MudBlazor.Color.Success"
                           Label="Has Cert Card?"
                           T="bool" />
            </ContentColumn2>
        </DivRowCol2>
        <DivRowCol2>
            <Content>
                <MudSwitch Checked="@ViewModel.HasLetter"
                           CheckedChanged="(p) => ViewModel.HasLetter = p"
                           Color="MudBlazor.Color.Success"
                           Label="Has LOA?"
                           T="bool" />
            </Content>
            <ContentColumn2>
                <MudSwitch Checked="@ViewModel.Witnessed"
                           CheckedChanged="(p) => ViewModel.Witnessed = p"
                           Color="MudBlazor.Color.Success"
                           Label="Was Witnessed?"
                           T="bool" />
            </ContentColumn2>
        </DivRowCol2>
        <DivLeftAlign>
            <Content>
                <DivHidden Hidden="@(!_canAddAuthentication)">
                    <Content>
                        <AddButton OnClick="AddAuthentication" />
                    </Content>
                </DivHidden>
                <DivHidden Hidden="@(!_canUpdateAuthentication)">
                    <Content>
                        <UpdateButton OnClick="UpdateAuthentication" />
                    </Content>
                </DivHidden>
            </Content>
        </DivLeftAlign>        
        <DivRowCol12>
            <Content>
                <MudTable Bordered="false"
                          Dense="false" 
                          Hover="true"
                          Items="@AuthenticationsViewModel.Authentications.Where(authentication => !authentication.IsDeleted)"    
                          Striped="true">
                    <ToolBarContent>
                        <MudText Typo="Typo.h6">Authentications</MudText>
                    </ToolBarContent>
                    <HeaderContent>
                        <MudTh>Authentication Company</MudTh>
                        <MudTh>Has Certification Card</MudTh>
                        <MudTh>Has Hologram</MudTh>
                        <MudTh>Has Letter</MudTh>
                        <MudTh>Verification</MudTh>
                        <MudTh>Witnessed</MudTh>
                        <MudTh></MudTh>
                    </HeaderContent>
                    <RowTemplate Context="authentication">
                        <MudTd DataLabel="Authentication Company">
                            <PrettyBlazor.Condition Evaluation="authentication.CanNavigateToWebsite">
                                <Match>
                                    <MudLink Href="@(authentication.VerificationWebsiteLink)" Target="_blank">@authentication.VerificationWebsiteLinkText</MudLink>
                                </Match>
                                <NotMatch>
                                    @authentication.AuthenticationCompanyName
                                </NotMatch>
                            </PrettyBlazor.Condition>                            
                         </MudTd>
                        <MudTd DataLabel="Has Certification Card">@(authentication.HasCertificationCard ? "Yes" : "No")</MudTd>
                        <MudTd DataLabel="Has Hologram">@(authentication.HasHologram ? "Yes" : "No")</MudTd>
                        <MudTd DataLabel="Has Letter">@(authentication.HasLetter ? "Yes" : "No")</MudTd>
                        <MudTd DataLabel="Verification">@authentication.Verification</MudTd>
                        <MudTd DataLabel="Witnessed">@(authentication.Witnessed ? "Yes" : "No")</MudTd>
                        <MudTd DataLabel="">
                            <MudTooltip Text="Edit">
                                <MudFab Color="MudBlazor.Color.Primary"                                
                                        Icon="@Icons.Material.Outlined.ModeEditOutline"
                                        OnClick="@(_ => Edit(authentication))" />
                            </MudTooltip>   
                            <MudTooltip Text="Delete">
                                <MudFab Color="MudBlazor.Color.Secondary"
                                        Icon="@Icons.Material.Outlined.DeleteOutline"
                                        OnClick="@(_ => authentication.IsDeleted = true)" />
                            </MudTooltip>
                        </MudTd>
                    </RowTemplate>
                </MudTable>
            </Content>
        </DivRowCol12>  
        <br />
    </Content>
</EditPage>