<Div Style="margin-top:1%;margin-bottom:1%;margin-left:1%;margin-right:1%;">
    <Div Class="row">
        <Div Class="col-3">
            <h3>
                User Settings
            </h3>
        </Div>
    </Div>
    <ExpansionPanel Text="Appearance">
        <DivRowFormGroup>
            <Div Class="col-3">
                <Switch Checked="EditModel.UseDarkTheme"
                        CheckedChanged="(p) => EditModel.UseDarkTheme = p"
                        Label="Use Dark Theme?" />
            </Div>
        </DivRowFormGroup>
    </ExpansionPanel>    
    <ExpansionPanel Text="Login Settings">
        <DivRowFormGroup>
            <Div Class="col-3">
                <TextField HelperText="Used for Google Authentication"
                           Label="Google Email Address"
                           MaxLength="100"
                           SelectedText="@EditModel.GoogleEmailAddress"
                           SelectedTextChanged="@((p) => EditModel.GoogleEmailAddress = p)" />
            </Div>
            <Div Class="col-3">
                <TextField HelperText="Used for Microsoft Authentication"
                           Label="Microsoft Email Address"
                           MaxLength="100"
                           SelectedText="@EditModel.MicrosoftEmailAddress"
                           SelectedTextChanged="@((p) => EditModel.MicrosoftEmailAddress = p)" />
            </Div>
            <Div Class="col-3">
                <TextField HelperText="Used for X Authentication"
                           Label="X Handle"
                           MaxLength="50"
                           SelectedText="@EditModel.XHandle"
                           SelectedTextChanged="@((p) => EditModel.XHandle = p)" />
            </Div>
        </DivRowFormGroup>
    </ExpansionPanel>
    <ExpansionPanel Text="Membership Settings">
        <DivRowFormGroup>
            <Div Style="margin-left:1%;margin-bottom:1%">
                <MudStack Row="true">
                    <Text Typography="Typo.h6">
                        Subscription: <b>@(ApplicationStateService.SubscriberLevel)</b>
                    </Text>
                    <Condition Evaluation="@(ApplicationStateService.CurrentUser.SubscriptionExpirationDate.HasValue)">
                        <Match>
                            <Text Typography="Typo.h6">
                                Expires: <b>@(ApplicationStateService.CurrentUser.SubscriptionExpirationDate.Value.ToString("MM-dd-yyyy"))</b>
                            </Text>
                        </Match>
                    </Condition>  
                    <Text Typography="Typo.h6">
                        Status: <b>@ApplicationStateService.CurrentUser.MembershipStatus()</b>
                    </Text>
                </MudStack>
            </Div>                       
        </DivRowFormGroup>
        <DivRowFormGroup>
            <Div Style="margin-left:1%;">
                <MudStack Row="true">
                    <Condition Evaluation="@_showUpgradeMembership">
                        <Match>
                            <CustomButton Color="MudBlazor.Color.Success"
                                          OnClick="@UpgradeMembership"
                                          Text="Upgrade" />
                        </Match>
                    </Condition>
                    <Condition Evaluation="@_showCancelMembership">
                        <Match>
                            <CustomButton Color="MudBlazor.Color.Error"
                                          OnClick="@CancelMembership"
                                          Text="Cancel Membership" />
                        </Match>
                    </Condition>
                    <Condition Evaluation="@(ApplicationStateService.CurrentUser.IsActiveMember())">
                        <Match>
                            <MudLink Href="@StripeSettings.CustomerSelfManageUrl" Target="_blank">
                                Update Payment Details
                            </MudLink>
                        </Match>
                    </Condition>
                </MudStack>
            </Div>
        </DivRowFormGroup>
    </ExpansionPanel>
    <ExpansionPanel Text="Payment Settings">
        <DivRowFormGroup>
            <UserPaymentOptionEditor PaymentOptions="EditModel.PaymentOptions" />
        </DivRowFormGroup>
    </ExpansionPanel>
    <ExpansionPanel Text="Social Medias">
        <DivRowFormGroup>
            <UserSocialMediaEditor SocialMedias="EditModel.SocialMedias" />
        </DivRowFormGroup>
    </ExpansionPanel>
    <Div Style="margin-bottom:1%;margin-right:1%;text-align:right;">
        <SaveButton OnClick="OnSave"
                    Text="Save" />
    </Div>
</Div>
