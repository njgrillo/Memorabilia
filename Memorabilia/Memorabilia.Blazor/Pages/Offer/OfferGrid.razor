<MudTable Bordered="false"
          Dense="false"
          Hover="true"
          Items="Items"
          Striped="true">
    <ToolBarContent>
        <ToolbarTitle Text="Offers" />
    </ToolBarContent>
    <HeaderContent>
        <MudTh></MudTh>
        <MudTh>Buyer</MudTh>
        <MudTh>Seller</MudTh>
        <MudTh>Offer Date</MudTh>
        <MudTh>Expires Date</MudTh>
        <MudTh>Amount</MudTh>
        <MudTh>Status</MudTh>
        <MudTh></MudTh>
        <MudTh></MudTh>
    </HeaderContent>
    <RowTemplate>
        <MudTd>
            <ToggleGridButton Toggled="@(_ => ToggleChildContent(context.Id))" />
        </MudTd>
        <MudTd DataLabel="Buyer">@context.Buyer.Username</MudTd>
        <MudTd DataLabel="Seller">@context.Seller.Username</MudTd>
        <MudTd DataLabel="OfferDate">@context.OfferDate.ToString("MM-dd-yyyy")</MudTd>
        <MudTd DataLabel="ExpiresDate">@context.ExpirationDate.ToString("MM-dd-yyyy")</MudTd>
        <MudTd DataLabel="Amount">@(context.Amount.ToString("c"))</MudTd>
        <MudTd DataLabel="Status">@context.OfferStatusTypeName</MudTd>
        <MudTd>
            <Fab Color="MudBlazor.Color.Secondary"
                 OnClick="@(_ => Cancel(context))"
                 StartIcon="@Icons.Material.Outlined.Cancel"
                 TooltipText="Cancel"
                 Visible="context.CantAcceptCounterReject" />
        </MudTd>
        <MudTd>
            <Fab Color="MudBlazor.Color.Secondary"
                 OnClick="@(_ => Accept(context))"
                 StartIcon="@Icons.Material.Outlined.Handshake"
                 TooltipText="Accept"
                 Visible="@(!context.CantAcceptCounterReject && context.ShowActions)" />
            <Fab Color="MudBlazor.Color.Secondary"
                 OnClick="@(_ => Counter(context.Id))"
                 StartIcon="@Icons.Material.Outlined.SwapHoriz"
                 TooltipText="Counter"
                 Visible="@(!context.CantAcceptCounterReject && context.ShowActions)"/>
            <Fab Color="MudBlazor.Color.Secondary"
                 OnClick="@(_ => Reject(context))"
                 StartIcon="@Icons.Material.Outlined.DoNotTouch"
                 TooltipText="Reject"
                 Visible="@(!context.CantAcceptCounterReject && context.ShowActions)"/>
        </MudTd>            
    </RowTemplate>
    <ChildRowContent>
        <HiddenControl Visible="@context.Memorabilia.DisplayAutographDetails">
            <TableRowPadded>
                <TableDataSpan>
                    <MudTable Bordered="false"
                              Dense="false"
                              Hover="true"
                              Items="@(new List<OfferMemorabiliaModel> { context.Memorabilia } )"
                              Striped="true">
                        <ToolBarContent>
                            <ToolbarTitle Text="Items" />
                            <MudSpacer />
                        </ToolBarContent>
                        <HeaderContent>
                            <MudTh></MudTh>
                            <MudTh>Item</MudTh>
                            <MudTh>Condition</MudTh>
                            <MudTh></MudTh>
                        </HeaderContent>
                        <RowTemplate Context="item">
                            <MudTd>
                                <GridImage AllowNavigation="false" 
                                           ImageData="@(ImageService.GetUserImageData(item.ImageFileName, item.UserId))"
                                           ImageLoaded="StateHasChanged" />
                            </MudTd>
                            <MudTd DataLabel="Item">@item.ItemTypeName</MudTd>
                            <MudTd DataLabel="Condition">@item.ConditionName</MudTd>
                            <MudTd>
                                <ViewMemorabiliaImagesFab MemorabiliaId="item.MemorabiliaId"
                                                          UserId="item.UserId"
                                                          Visible="@(!item.ImageFileName.IsNullOrEmpty())"/>
                            </MudTd>
                        </RowTemplate>
                        <PagerContent>
                            <MudTablePager />
                        </PagerContent>
                    </MudTable>
                </TableDataSpan>
            </TableRowPadded>
        </HiddenControl>
    </ChildRowContent>
    <PagerContent>
        <MudTablePager />
    </PagerContent>
</MudTable>