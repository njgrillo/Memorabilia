<MudTable Bordered="false"
          Dense="false"
          Filter="new Func<ThroughTheMailModel,bool>(Filter)"
          Hover="true"
          Items="@Items"
          Striped="true">
    <ToolBarContent>
        <MudText Typo="Typo.h6">Through the Mail</MudText>
        <MudSpacer />
        <MudTextField @bind-Value="Search"
                      Adornment="Adornment.Start"
                      AdornmentIcon="@Icons.Material.Filled.Search"
                      Class="mt-0"
                      IconSize="MudBlazor.Size.Medium"
                      Placeholder="Search" />
    </ToolBarContent>
    <HeaderContent>
        <MudTh></MudTh>
        <MudTh>Person</MudTh>
        <MudTh>Sent Date</MudTh>
        <MudTh>Received Date</MudTh>
        <MudTh>Status</MudTh>
        <Condition Evaluation="@HasCompletedItems">
            <Match>
                <MudTh>Items Received/Sent</MudTh>
            </Match>
            <NotMatch>
                <MudTh>Items Sent</MudTh>
            </NotMatch>
        </Condition>
        <MudTh></MudTh>
    </HeaderContent>
    <RowTemplate>
        <MudTd DataLabel="">
            <MudImage @onclick="@(_ => ShowPersonProfile(context.Person.Id))"
                      Class="rounded-lg"
                      Elevation="5"
                      Height="200"
                      ObjectFit="@ObjectFit.Cover"
                      Src="@(ImageService.GetPersonImageData(context.Person.ImageFileName))"
                      Width="200" />
        </MudTd>
        <MudTd DataLabel="Person">@context.Person.DisplayName</MudTd>
        <MudTd DataLabel="SentDate">@(context.SentDate.HasValue ? context.SentDate.Value.ToString("MM-dd-yyyy") : string.Empty)</MudTd>
        <MudTd DataLabel="ReceivedDate">@(context.ReceivedDate.HasValue ? context.ReceivedDate.Value.ToString("MM-dd-yyyy") : string.Empty)</MudTd>
        <MudTd DataLabel="Status">@context.Status</MudTd>
        <Condition Evaluation="@HasCompletedItems">
            <Match>
                <MudTd DataLabel="ItemsReceivedSent">@context.ItemSuccessCount</MudTd>
            </Match>
            <NotMatch>
                <MudTd DataLabel="ItemsSent">@context.Memorabilia.Count()</MudTd>
            </NotMatch>
        </Condition>
        <MudTd DataLabel="">
            <GridEditButton NavigationPath="@($"ThroughTheMail/Edit/{context.Id}")" />
            <MudTooltip Text="Delete">
                <MudFab Color="MudBlazor.Color.Secondary"
                    Icon="@Icons.Material.Outlined.DeleteOutline"
                    OnClick="@(_ => ShowDeleteConfirm(@context.Id))" />
            </MudTooltip>
        </MudTd>
    </RowTemplate>
    <PagerContent>
        <MudTablePager />
    </PagerContent>
</MudTable>
