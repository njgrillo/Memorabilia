@inherits ReroutePage

<ExpansionPanel Text="@(ForumEntry.ModifiedDate?.ToString("dddd, MMMM dd, yyyy hh:mm:ss tt") ?? ForumEntry.CreatedDate.ToString("dddd, MMMM dd, yyyy hh:mm:ss tt"))">
    <LeftRightSection LeftStyle="@Style.Width20Percent"
                      RightStyle="@Style.Width80Percent">
        <Left>
            <Text Typography="Typo.h6">@ForumEntry.CreatedByUser.Username</Text>
        </Left>
        <Right>
            <RowStack>    
                <Div Class="@($"{DivClass.ColumnAuto} {DivClass.Padding1}")"
                     Visible="@(!CanEdit)">
                    <Fab Color="MudBlazor.Color.Primary"
                         OnClick="UpdateRank"
                         Size="MudBlazor.Size.Small"
                         StartIcon="@Icons.Material.Outlined.ArrowUpward"
                         TooltipText="@_upvoteButtonText" />
                </Div>           
                <Div Class="@($"{DivClass.ColumnAuto} {DivClass.Padding1}")">
                    <Text Typography="Typo.h6">
                        @ForumEntry.Rank.ToString()
                    </Text>
                </Div>
                <Div Class="@DivClass.Column8">
                    <TextField Disabled="@(!EditMode)" 
                               Label="Message"
                               Lines="10"
                               SelectedText="@ForumEntry.Message"
                               SelectedTextChanged="@((p) => ForumEntry.Message = p)"
                               Visible="EditMode" />
                    <Text Style="@Style.BorderWhite" 
                          Typography="Typo.body1"
                          Visible="@(!CanEdit || !EditMode)">
                        <Div Style="@Style.MarginPad2">
                            @ForumEntry.Message
                        </Div>
                    </Text>
                </Div>   
                <HiddenControl Visible="ForumEntry.Images.Any()">
                    <ForumEntryImages CanDelete="CanEdit"
                                      ImageDeleted="OnImageDeleted"
                                      Images="ForumEntry.Images"
                                      UserId="ForumEntry.CreatedByUserId"/>
                </HiddenControl>
                <EditGridButton OnEdit="Edit"
                                Size="@MudBlazor.Size.Small"
                                Visible="@(CanEdit && !EditMode)" />
                <Fab Color="MudBlazor.Color.Primary"
                     OnClick="Confirm"
                     Size="MudBlazor.Size.Small"
                     StartIcon="@Icons.Material.Outlined.Check"
                     TooltipText="Confirm"
                     Visible="@(CanEdit && EditMode)" />
                <Fab Color="MudBlazor.Color.Primary"
                     OnClick="AddImages"
                     Size="MudBlazor.Size.Small"
                     StartIcon="@Icons.Material.Outlined.AttachFile"
                     TooltipText="Attachments"
                     Visible="@(CanEdit && CanAttach)" />
            </RowStack>            
        </Right>
    </LeftRightSection>
</ExpansionPanel>
