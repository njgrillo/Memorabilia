@inherits LayoutComponentBase

<MudThemeProvider />
<MudDialogProvider />
<MudSnackbarProvider />

<MudLayout>
    <MudAppBar>
        <LeftRightSection>
            <Left>
                <MudTooltip Text="@(_drawerOpen ? "Collapse" : "Expand")">
                    <MudIconButton Color="MudBlazor.Color.Inherit"
                                   Edge="Edge.Start"
                                   Icon="@Icons.Material.Filled.Menu"
                                   OnClick="@((e) => DrawerToggle())" />
                </MudTooltip> 
                <MudTooltip Text="@_themeText">
                    <MudIconButton Color="MudBlazor.Color.Inherit"
                                   Edge="Edge.Start"
                                   Icon="@Icons.Material.Filled.DarkMode"
                                   OnClick="@((e) => ToggleTheme())" />
                </MudTooltip>
            </Left>
            <Right>
                <AuthorizeView>
                    <Authorized>
                        <MudTooltip Text="User Settings">
                            <MudIconButton Color="MudBlazor.Color.Inherit"
                                           Edge="Edge.Start"
                                           Icon="@Icons.Material.Filled.Settings"
                                           OnClick="@((e) => UserSettings())" />
                        </MudTooltip>
                    </Authorized>
                </AuthorizeView>
                <LoginControl />
            </Right>
        </LeftRightSection>   
    </MudAppBar>
    <MudDrawer @bind-Open="@_drawerOpen">
        <NavMenu />
    </MudDrawer>
    <MudMainContent Style="@_theme">
        <CustomErrorBoundary @ref="_errorBoundary"
                             ErrorHasOccurred="OnError">
            <Condition Evaluation="@(_currentException != null)">
                <Match>
                    <AlertBox Close="OnAlertClose" 
                              Severity="Severity.Error"
                              Text="@_currentException.Message" />
                    @Body
                </Match>
                <NotMatch>
                    @Body
                </NotMatch>
            </Condition>
        </CustomErrorBoundary>        
    </MudMainContent>
</MudLayout>