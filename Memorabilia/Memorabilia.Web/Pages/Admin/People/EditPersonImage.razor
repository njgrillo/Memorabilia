@page "/People/Image/Edit/{personId:int}"

@using Memorabilia.Application.Features.Admin.People
@using Memorabilia.Web.Controls.Person

<EditPage ContinueNavigationPath="@_viewModel.ContinueNavigationPath"
          DisplaySaveContinueButton="false"
          EditMode="_viewModel.EditModeType"
          ExitNavigationPath="@_viewModel.ExitNavigationPath"
          ImagePath="@_viewModel.PageImagePath" 
          ItemName="@_viewModel.ItemTitle"
          Model="_viewModel"
          OnLoad="OnLoad"
          OnSave="OnSave"
          PageFooterButtonText="@_viewModel.ExitButtonText"
          PageFooterNavigationPath="@_viewModel.BackNavigationPath"
          PageTitle="@_viewModel.PageTitle"
          TItem="SavePersonImageViewModel"
          UseMultipleButtons="true">
    <TimelineContent>
        <PersonTimeline EditMode="_viewModel.EditModeType"
                        PersonId="_viewModel.PersonId"
                        PersonStep="_viewModel.PersonStep" />
    </TimelineContent>
    <Content>
        <DivRowCol12>
            <Content>
                <DivRowCol3>
                    <Content>
                        <InputFile id="fileInput" accept="image/*" hidden
                                                  OnChange="@LoadFile"   />
                        <MudFab Color="MudBlazor.Color.Secondary"
                                HtmlTag="label"
                                Icon="@Icons.Filled.Image"
                                Label="Load picture"
                                for="fileInput" />  
                    </Content>
                </DivRowCol3>
                <DivRowCol3>
                    <Content>
                        <PrettyBlazor.Condition Evaluation="_hasImage">
                            <Match>
                                <ImageEditor CanRemove="true"
                                             FileName=""
                                             HasPrimary="false"
                                             ImageFilePath="@_viewModel.ImagePath"
                                             ImageType="ImageType.Primary"
                                             OnRemove="Remove" /> 
                            </Match>
                        </PrettyBlazor.Condition>
                    </Content>
                </DivRowCol3>
            </Content>
        </DivRowCol12>
    </Content>
</EditPage>
